{% extends 'base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<!-- Main content -->
<section class="content">

    <div class="row">
        <div class="col-md-3">
            {% set user = app.user %}
            {{ include('members/profile_sidebar.html.twig') }}
        </div>
        <!-- /.col -->
        <div class="col-md-9">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#my-account" data-toggle="tab">{% trans %}My Account{% endtrans %}</a></li>
                    <li><a href="#user-avatar" data-toggle="tab">User Avatar</a></li>
                    <li><a href="#role-tags" data-toggle="tab">Role Tags</a></li>
                </ul>
                <div class="tab-content">
                    <div class="active tab-pane" id="my-account">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="fa fa-lg fa-key margin-r-5"></i> Change Password</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <form action="" method="post" class="form-horizontal">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-sm-12">
                                                <input type="password" class="form-control input-sm" id="current-password" name="current_password" placeholder="Current Password">
                                                <small>Enter your current password.</small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-12">
                                                <input type="password" class="form-control input-sm" id="new-password" name="new_password" placeholder="New Password">
                                                <small id="new-password">Enter a new password.</small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-12">
                                                <input type="password" class="form-control input-sm" id="verify-password" name="verify_password" placeholder="Verify Password">
                                                <small id="verify-password-message">Re-type the new password to verify.</small>
                                            </div>
                                        </div>
                                        <input type="hidden" name="_token" value="{{ csrf_token('change_password') }}">
                                    </div>
                                    <div class="col-md-6">
                                        <p>When choosing a new password, please consider the following:</p>
                                        <ul style="padding-left: 15px;">
                                            <li>Use 6 to 64 characters</li>
                                            <li>Besides letters, include at least a number or symbol</li>
                                            <li>Password is case sensitive</li>
                                            <li>Password is not part of your username</li>
                                            <li>Avoid using the same password for multiple sites</li>
                                        </ul>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-default btn-flat pull-right">Change Password</button>
                                <button type="reset" class="btn btn-primary btn-flat pull-right margin-r-5">Reset</button>
                                </form>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="fa fa-lg fa-refresh margin-r-5"></i> Purge Commander Data</h3>
                            </div>
                            <div class="panel-body">
                                <div>
                                    <p>Sometimes commanders would purge their data because the data doesn't look right. By clearing your data from the database, you can re-import your journal files to make your data more current and up-to-date. Before you purge your data and re-import all of your player journal files, please quit your game and your EDMC if it is running.</p>
                                    <form method="post" action="">
                                        <input type="hidden" name="_token" value="{{ csrf_token('reset_data') }}">
                                        <input id="purge-confirm" type="checkbox"> <b>I understand that by purging the data, it is irreversible.</b>
                                        <br>
                                        <button id="purge-button" type="submit" class="btn btn-danger btn-flat pull-right" disabled="disabled">Purge the Data</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.tab-pane -->
                    <div class="tab-pane" id="user-avatar">
                        <div class="jumbotron">
                            <h1>// To Do</h1>
                            <p>Placeholder for future addition</p>
                        </div>
                    </div>
                    <!-- /.tab-pane -->
                    <div class="tab-pane" id="role-tags">
                        <div class="jumbotron">
                            <h1>// To Do</h1>
                            <p>Placeholder for future addition</p>
                        </div>
                    </div>
                    <!-- /.tab-pane -->
                </div>
                <!-- /.tab-content -->
            </div>
            <!-- /.nav-tabs-custom -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->

</section>
<!-- /.content -->
{% endblock %}
{% block javascripts %}
{{ parent() }}
<script>
    $(()=>{
        $('form').on('keypress', function (e) {
            var key = e.charCode || e.keyCode || 0;
            if(key == 13) {
                e.preventDefault();
            }
        });
        $('#purge-confirm').on('change', function (e) {
           e.preventDefault();
           if($('#purge-confirm').is(':checked')) {
               $('#purge-button').removeAttr('disabled');
           }
           else {
               $('#purge-button').attr('disabled','disabled');
           }
        });
    });
</script>
{% endblock %}
